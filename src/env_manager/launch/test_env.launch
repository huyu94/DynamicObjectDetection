<launch>
    <arg name="cloud_topic_" value="rendered_pcl"/>
    <arg name="odom_topic"  value="odometry"/>
    <arg name="drone_id" value="0"/>

    <include file="$(find env_manager)/launch/map.xml">
        <arg name="init_x_" value="0"/>
        <arg name="init_y_" value="0"/>
        <arg name="init_z_" value="0"/>
        <arg name="map_size_x_" value="20.0"/>
        <arg name="map_size_y_" value="20.0"/>
        <arg name="map_size_z_" value="3.0"/>
        <arg name="odom_topic_" value="$(arg odom_topic)"/>
    </include>


    <include file="$(find env_manager)/launch/simulator.xml">
        <arg name="init_x_" value="0"/>
        <arg name="init_y_" value="0"/>
        <arg name="init_z_" value="0.1"/>
        <arg name="drone_id" value="$(arg drone_id)"/>
        <arg name="use_gpu" value="true"/>
        <arg name="sensor_type" value="mid360"/>
    </include>
    

    <node pkg="env_manager" type="test_node" name="test_node" output="screen">
        <remap from="~cloud" to="/drone_$(arg drone_id)/$(arg cloud_topic_)"/>
        <remap from="~odom"  to="/drone_$(arg drone_id)/odometry"/>
        <rosparam file="$(find env_manager)/cfg/env_manager_params.yaml" />
        <!-- <rosparam file="$(find env_manager)/cfg/grid_map_params.yaml" /> -->
    </node>


    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find env_manager)/rviz/default.rviz" required="true" />

    
</launch>   